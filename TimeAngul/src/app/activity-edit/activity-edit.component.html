<div class="container mt-5">
  <h1>Uredi "{{ activity.ActivityName }}"</h1>
  <p *ngIf="activity.activityTasks.length === 0">
    Trenutno nema dodanih zadataka. Dodaj novi pritiskom na gumb ispod.
  </p>
  <div class="mb-2" *ngFor="let activityTask of activity.activityTasks">
    <app-activity-task-item
      [activityTask]="activityTask"
    ></app-activity-task-item>
  </div>
  <button
    class="btn btn-secondary"
    (click)="addNewActivityTask()"
    *ngIf="!creating"
  >
    <i class="fas fa-plus mr-2"></i> Dodaj novi zadatak
  </button>
  <div class="card" *ngIf="creating">
    <div class="card-body">
      <h5 class="card-title">Novi zadatak</h5>
      <form (submit)="saveNewActivityTask(); $event.preventDefault()">
        <div class="form-group">
          <label for="activityName">Naziv</label>
          <input
            type="text"
            class="form-control"
            id="activityName"
            name="activityName"
            [(ngModel)]="newActivityTask.ActivityTaskName"
            placeholder="Unesi naziv zadataka"
          />
        </div>
        <div class="form-group">
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="taskType"
              id="taskType2"
              value="auto"
              [(ngModel)]="newActivityTask.Type"
            />
            <label class="form-check-label" for="taskType2">
              Automatski odredi raspored
            </label>
          </div>
          <div
            class="additional-form mb-1"
            *ngIf="newActivityTask.Type === 'auto'"
          >
            <div class="form-group">
              <label for="duration">Trajanje u satima</label>
              <input
                type="number"
                class="form-control"
                id="duration"
                name="duration"
                [(ngModel)]="newActivityTask.Duration"
                placeholder="Unesi trajanje u satima"
              />
            </div>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="taskType"
              id="taskType1"
              value="fixed"
              [(ngModel)]="newActivityTask.Type"
            />
            <label class="form-check-label" for="taskType1">
              Želim napraviti po fiksnom rasporedu
            </label>
          </div>
          <div
            class="additional-form mb-1"
            *ngIf="newActivityTask.Type === 'fixed'"
          >
            <mat-form-field class="mr-2">
              <input
                matInput
                [matDatepicker]="date1"
                placeholder="Odaberi datum"
                [value]="newActivityTask.FixedDate"
                (dateChange)="setFixedData('change', $event)"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="date1"
              ></mat-datepicker-toggle>
              <mat-datepicker #date1></mat-datepicker>
            </mat-form-field>
            <div class="form-group">
              <label for="TimeFrom">Vrijeme početka</label>
              <input
                type="number"
                class="form-control"
                id="TimeFrom"
                name="TimeFrom"
                [(ngModel)]="newActivityTask.TimeFrom"
                placeholder="Unesi vrijeme početka"
              />
            </div>
            <div class="form-group">
              <label for="TimeTo">Vrijeme završetka</label>
              <input
                type="number"
                class="form-control"
                id="TimeTo"
                name="TimeTo"
                [(ngModel)]="newActivityTask.TimeTo"
                placeholder="Unesi vrijeme završetka"
              />
            </div>
          </div>
        </div>
        <button class="btn btn-primary mr-2" type="submit">
          <i class="fas fa-save mr-2"></i> Spremi
        </button>
        <button
          class="btn btn-secondary"
          (click)="cancelAddingNewTask(); $event.preventDefault()"
        >
          Odustani
        </button>
      </form>
    </div>
  </div>
</div>
